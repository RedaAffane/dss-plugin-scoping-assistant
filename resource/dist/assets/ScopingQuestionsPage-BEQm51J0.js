import{Q as E}from"./QPage-BvaG2vQH.js";import{Q as w,a as D,b as C,c as I,G as R,d as F,e as B,g as L}from"./GenerationProcess-Czo_aAIo.js";import{b as y,Q as z}from"./QBtn-BqAABnS7.js";import{e as n,r as m,K as h,L as G,M as l,Q as i,O as a,P,T as q}from"./index-BtPKUw67.js";import"./render-BXVSlnlj.js";import"./format-Dls-aKGN.js";import"./use-dark-Ct4T5hl3.js";const A={class:"row q-col-gutter-xl"},N={class:"col-12"},j={class:"row q-col-gutter-xl"},O={class:"col-12"},K={class:"row q-col-gutter-xl"},M={class:"col-12"},$={class:"row q-col-gutter-xl q-mt-xl"},H={class:"col-12"},J={__name:"ScopingQuestionsForm",emits:["submit","generateScopingQuestions"],setup(T,{emit:_}){const r=_,c=n("isGeneratingScoping"),v=n("hasGeneratedScoping"),o=m({sePrePitchQuestions:"",notes:"",callTranscript:null}),f=()=>{r("submit",o.value)},S=()=>{console.log("Upload SE pre-pitch questions")},b=()=>{console.log("Upload call transcript")},Q=()=>{c.value=!0,v.value=!0,r("generateScopingQuestions",o.value)};return(x,e)=>(G(),h(I,{onSubmit:f,class:"q-gutter-xl"},{default:l(()=>[i("div",A,[i("div",N,[a(w,{modelValue:o.value.sePrePitchQuestions,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.sePrePitchQuestions=s),label:"SE pre-pitch scoping questions & answers",type:"url",rules:[s=>!!s||"Field is required"],class:"q-mb-md"},{append:l(()=>[a(y,{flat:"",round:"",icon:"upload_file",onClick:S},{default:l(()=>[a(D,null,{default:l(()=>e[3]||(e[3]=[P("Upload SE Pre-pitch Questions")])),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue","rules"])])]),i("div",j,[i("div",O,[a(w,{modelValue:o.value.notes,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.notes=s),label:"Notes",type:"textarea",filled:"",autogrow:"",class:"q-mb-xl"},null,8,["modelValue"])])]),i("div",K,[i("div",M,[a(C,{modelValue:o.value.callTranscript,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.callTranscript=s),label:"AE/SE call transcript",accept:".txt,.doc,.docx,.pdf",rules:[s=>!!s||"Field is required"],class:"q-mb-md"},{prepend:l(()=>[a(z,{name:"description"})]),append:l(()=>[a(y,{flat:"",round:"",icon:"upload_file",onClick:b},{default:l(()=>[a(D,null,{default:l(()=>e[4]||(e[4]=[P("Upload Transcript")])),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue","rules"])])]),i("div",$,[i("div",H,[a(y,{color:"primary",label:"Generate Scoping questions",class:"full-width",onClick:Q})])])]),_:1}))}},ne={__name:"ScopingQuestionsPage",setup(T){const _=n("hasGeneratedScoping"),r=n("isGeneratingScoping"),c=n("scopingData"),v=n("hasGenerated"),o=n("isGenerating"),f=n("summaryData"),S=n("similarDocsData"),b=n("serviceDaysData"),Q=n("assumptionsData"),x=n("blueprintsData"),e=m(null),s=m(0),g=m({message_0:!1,message_1:!1,message_2:!1,message_3:!1}),V=u=>{console.log("Form submitted:",u)},U=async u=>{g.value={message_0:!0,message_1:!1,message_2:!1,message_3:!1},c.value={analysisInputs:null,analysisTranscripts:null,scopingQuestions:null},s.value++,v.value=!1,o.value=!1,f.value=null,S.value=null,b.value=null,Q.value=null,x.value=null,console.log("Starting scoping questions generation..."),setTimeout(()=>{const t=document.querySelector(".loading-section");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},100);try{console.log("Step 1: Analyzing inputs..."),g.value.message_1=!0;const t=await F(u);if(!r.value){console.log("Generation stopped by user after step 1");return}c.value.analysisInputs=t,console.log("Step 2: Analyzing transcripts..."),g.value.message_2=!0;const d=await B(u);if(!r.value){console.log("Generation stopped by user after step 2");return}c.value.analysisTranscripts=d,console.log("Step 3: Generating scoping questions..."),g.value.message_3=!0;const p=await L(u);if(!r.value){console.log("Generation stopped by user after step 3");return}c.value.scopingQuestions=p}catch(t){console.error("Error generating scoping questions:",t),alert("Error generating scoping questions: "+t.message)}finally{r.value=!1}},k=()=>{const u=c.value.scopingQuestions,t=new Blob([u],{type:"text/plain"}),d=window.URL.createObjectURL(t),p=document.createElement("a");p.href=d,p.download="scoping_questions.txt",document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(d),document.body.removeChild(p)};return(u,t)=>(G(),h(E,{class:"q-pa-xl q-ml-xl"},{default:l(()=>[t[0]||(t[0]=i("div",{class:"text-h4 q-mb-xl"},"Generate Scoping Questions",-1)),a(J,{onGenerateScopingQuestions:U,onSubmit:V}),(G(),h(R,{key:s.value,ref_key:"loadingSection",ref:e,"is-generating-scoping":q(r),"has-generated-scoping":q(_),"scoping-message-states":g.value,"scoping-data":q(c),onDownloadScopingQuestions:k},null,8,["is-generating-scoping","has-generated-scoping","scoping-message-states","scoping-data"]))]),_:1,__:[0]}))}};export{ne as default};
